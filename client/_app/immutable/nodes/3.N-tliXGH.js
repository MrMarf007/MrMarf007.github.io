var me=Object.defineProperty;var ye=(l,e,n)=>e in l?me(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n;var V=(l,e,n)=>ye(l,typeof e!="symbol"?e+"":e,n);import{t as H,a as j}from"../chunks/NV3ArIAD.js";import"../chunks/CjOWPgrE.js";import{s as W,h as I,O as xe,Y as be,a as ke,b as we,m as k,a0 as Me,c as Ce,r as te,d as J,g as B,R as Ae,e as se,f as fe,p as Ee,W as oe,K as $e,a1 as Z,a2 as ae,a3 as Q,M as ne,a4 as Se,a5 as Te,a6 as Ie,V as Ne,a7 as Re,x as De,a8 as Ve,a9 as je,P as Ge,B as He,F as Oe,z as G,A as N,y as P,aa as re,ab as Ye,D as ce}from"../chunks/CDwaHp4Y.js";import{d as Le,s as ue}from"../chunks/BlsOYjU0.js";import{i as ze}from"../chunks/DIrzQbST.js";import{i as Be}from"../chunks/Cj-UJROT.js";function Pe(l,e){return e}function Xe(l,e,n,s){for(var h=[],d=e.length,c=0;c<d;c++)Ie(e[c].e,h,!0);var y=d>0&&h.length===0&&n!==null;if(y){var o=n.parentNode;Ne(o),o.append(n),s.clear(),R(l,e[0].prev,e[d-1].next)}Re(h,()=>{for(var w=0;w<d;w++){var i=e[w];y||(s.delete(i.k),R(l,i.prev,i.next)),De(i.e,!y)}})}function le(l,e,n,s,h,d=null){var c=l,y={flags:e,items:new Map,first:null};{var o=l;c=I?W(xe(o)):o.appendChild(be())}I&&ke();var w=null,i=!1,M=Me(()=>{var u=n();return $e(u)?u:u==null?[]:oe(u)});we(()=>{var u=k(M),p=u.length;if(i&&p===0)return;i=p===0;let _=!1;if(I){var E=c.data===Ce;E!==(p===0)&&(c=te(),W(c),J(!1),_=!0)}if(I){for(var b=null,g,C=0;C<p;C++){if(B.nodeType===8&&B.data===Ae){c=B,_=!0,J(!1);break}var A=u[C],$=s(A,C);g=ve(B,y,b,null,A,$,C,h,e,n),y.items.set($,g),b=g}p>0&&W(te())}I||qe(u,y,c,h,e,s,n),d!==null&&(p===0?w?se(w):w=fe(()=>d(c)):w!==null&&Ee(w,()=>{w=null})),_&&J(!0),k(M)}),I&&(c=B)}function qe(l,e,n,s,h,d,c){var y=l.length,o=e.items,w=e.first,i=w,M,u=null,p=[],_=[],E,b,g,C;for(C=0;C<y;C+=1){if(E=l[C],b=d(E,C),g=o.get(b),g===void 0){var A=i?i.e.nodes_start:n;u=ve(A,e,u,u===null?e.first:u.next,E,b,C,s,h,c),o.set(b,u),p=[],_=[],i=u.next;continue}if(Fe(g,E,C),(g.e.f&Q)!==0&&se(g.e),g!==i){if(M!==void 0&&M.has(g)){if(p.length<_.length){var $=_[0],S;u=$.prev;var D=p[0],O=p[p.length-1];for(S=0;S<p.length;S+=1)ie(p[S],$,n);for(S=0;S<_.length;S+=1)M.delete(_[S]);R(e,D.prev,O.next),R(e,u,D),R(e,O,$),i=$,u=O,C-=1,p=[],_=[]}else M.delete(g),ie(g,i,n),R(e,g.prev,g.next),R(e,g,u===null?e.first:u.next),R(e,u,g),u=g;continue}for(p=[],_=[];i!==null&&i.k!==b;)(i.e.f&Q)===0&&(M??(M=new Set)).add(i),_.push(i),i=i.next;if(i===null)continue;g=i}p.push(g),u=g,i=g.next}if(i!==null||M!==void 0){for(var L=M===void 0?[]:oe(M);i!==null;)(i.e.f&Q)===0&&L.push(i),i=i.next;var K=L.length;if(K>0){var z=y===0?n:null;Xe(e,L,z,o)}}ne.first=e.first&&e.first.e,ne.last=u&&u.e}function Fe(l,e,n,s){Te(l.v,e),l.i=n}function ve(l,e,n,s,h,d,c,y,o,w){var i=(o&Ve)!==0,M=(o&je)===0,u=i?M?Z(h):ae(h):h,p=(o&Se)===0?c:ae(c),_={i:p,v:u,k:d,a:null,e:null,prev:n,next:s};try{return _.e=fe(()=>y(l,u,p,w),I),_.e.prev=n&&n.e,_.e.next=s&&s.e,n===null?e.first=_:(n.next=_,n.e.next=_.e),s!==null&&(s.prev=_,s.e.prev=_.e),_}finally{}}function ie(l,e,n){for(var s=l.next?l.next.e.nodes_start:n,h=e?e.e.nodes_start:n,d=l.e.nodes_start;d!==s;){var c=Ge(d);h.before(d),d=c}}function R(l,e,n){e===null?l.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Ke(l,e,n){var s=l==null?"":""+l;return s=s?s+" "+e:e,s===""?null:s}function Ue(l,e,n,s,h,d){var c=l.__className;if(I||c!==n||c===void 0){var y=Ke(n,s);(!I||y!==l.getAttribute("class"))&&(y==null?l.removeAttribute("class"):l.className=y),l.__className=n}return d}var We=(l,e)=>e("up"),Je=(l,e)=>e("left"),Qe=(l,e)=>e("right"),Ze=(l,e)=>e("down"),et=H("<button> </button>"),tt=H('<div class="row svelte-2kegpa"></div>'),at=H('<div class="grid-container svelte-2kegpa"><div class="controls svelte-2kegpa"><button class="up svelte-2kegpa">â–²</button> <button class="left svelte-2kegpa">â—„</button> <button class="right svelte-2kegpa">â–º</button> <button class="down svelte-2kegpa">â–¼</button></div> <div class="grid svelte-2kegpa"></div></div>'),nt=H('<button class="start-button">Start Game</button>'),rt=H('<main class="svelte-2kegpa"><!></main>');function lt(l,e){He(e,!1);let n=new Map,s=Z(),h=new Map,d=18,c=28,y=.2,o={x:0,y:0},w=Math.floor(Math.random()*1e6),i=Z(!1);class M{constructor(t,a){V(this,"x");V(this,"y");V(this,"revealed");V(this,"mine");V(this,"adjacentMines");V(this,"flagged");this.x=t,this.y=a,this.revealed=!1,this.mine=u(t,a),this.adjacentMines=C(t,a),this.flagged=!1}}function u(r,t){const a=`${r},${t}`;return h.has(a)||h.set(a,p(r,t,w)),h.get(a)}function p(r,t,a){const f=`${r},${t},${a}`;let v=0;for(let m=0;m<f.length;m++)v=(v<<5)-v^f.charCodeAt(m),v|=0;return Math.abs(v%1e7)/1e7<y}function _(){for(let r=0;r<d;r++)for(let t=0;t<c;t++)E(r,t)}function E(r,t){if(!g(r,t)){const a=new M(r,t);n.set(`${a.x},${a.y}`,a)}for(let a=-1;a<=1;a++)for(let f=-1;f<=1;f++){if(a===0&&f===0)continue;const v=r+a,x=t+f;let m=b(v,x);if(m&&m.revealed&&m.adjacentMines==0){D(r,t);break}}}function b(r,t){const a=`${r},${t}`;return n.get(a)}function g(r,t){const a=`${r},${t}`;return n.has(a)}function C(r,t){let a=0;for(let f=-1;f<=1;f++)for(let v=-1;v<=1;v++){if(f===0&&v===0)continue;const x=r+f,m=t+v;u(x,m)&&a++}return a}function A(r){if(r==="up"){o.x-=1;for(let t=0;t<c;t++)E(o.x,o.y+t)}else if(r==="down"){o.x+=1;for(let t=0;t<c;t++)E(o.x+d-1,o.y+t)}else if(r==="left"){o.y-=1;for(let t=0;t<d;t++)E(o.x+t,o.y)}else if(r==="right"){o.y+=1;for(let t=0;t<d;t++)E(o.x+t,o.y+c-1)}$()}function $(){const r=[];for(let t=0;t<d;t++){const a=[];for(let f=0;f<c;f++){const v=t+o.x,x=f+o.y,m=b(v,x);m?a.push(m):a.push(new M(v,x))}r.push(a)}re(s,r)}function S(r,t){const a=b(r,t);if(!a)return!1;if(a.revealed&&a.adjacentMines===0)return!0;{let f=0;for(let v=-1;v<=1;v++)for(let x=-1;x<=1;x++){if(v===0&&x===0)continue;const m=r+v,X=t+x,q=b(m,X);q&&q.flagged&&f++}return a.adjacentMines<=f}}function D(r,t){const a=b(r,t);if(a)if(a.revealed&&S(r,t)){O(r,t);return}else!a.revealed&&!a.flagged&&(a.revealed=!0,a.mine?console.log("Game Over! Mine hit at:",r,t):a.adjacentMines===0&&O(r,t),$())}function O(r,t){for(let a=-1;a<=1;a++)for(let f=-1;f<=1;f++){if(a===0&&f===0)continue;const v=r+a,x=t+f,m=b(v,x);m&&!m.revealed&&!m.flagged&&D(v,x)}}function L(){var r,t;for(let a=0;a<d;a++)for(let f=0;f<c;f++)if(((r=b(a,f))==null?void 0:r.adjacentMines)===0&&!((t=b(a,f))!=null&&t.mine)){let v={x:a,y:f};for(;o.x<v.x-d/2;)A("down");for(;o.x>v.x-d/2;)A("up");for(;o.y<v.y-c/2;)A("right");for(;o.y>v.y-c/2;)A("left");D(a,f);return}}function K(){re(i,!0),n.clear(),h.clear(),o={x:0,y:0},console.log("Starting game with density:",y),_(),L(),$()}Be();var z=rt(),de=G(z);{var _e=r=>{var t=at(),a=G(t),f=G(a);f.__click=[We,A];var v=P(f,2);v.__click=[Je,A];var x=P(v,2);x.__click=[Qe,A];var m=P(x,2);m.__click=[Ze,A],N(a);var X=P(a,2);le(X,5,()=>k(s),Pe,(q,ee)=>{var U=tt();le(U,5,()=>k(ee),F=>F.x+","+F.y,(F,T,ot)=>{var Y=et();Y.__click=()=>D(k(T).x,k(T).y),Y.__contextmenu=pe=>{pe.preventDefault(),k(T).flagged=!k(T).flagged,Ye(()=>(k(s),k(ee))),$()};var he=G(Y,!0);N(Y),ce(()=>{Ue(Y,1,`cell ${k(T).revealed?"revealed":""} ${k(T).flagged?"flagged":""}`,"svelte-2kegpa"),ue(he,k(T).revealed?k(T).mine?"ðŸ’£":k(T).adjacentMines===0?"":k(T).adjacentMines:"")}),j(F,Y)}),N(U),j(q,U)}),N(X),N(t),j(r,t)},ge=r=>{var t=nt();t.__click=K,j(r,t)};ze(de,r=>{k(i)?r(_e):r(ge,!1)})}N(z),j(l,z),Oe()}Le(["click","contextmenu"]);var it=H('<main><h1 class="title svelte-eoh7cj"> </h1></main>');function st(l,e){var n=it(),s=G(n),h=G(s,!0);N(s),N(n),ce(()=>ue(h,e.title)),j(l,n)}var ft=H("<main><!> <!></main>");function pt(l){var e=ft(),n=G(e);st(n,{title:"Infinity Sweeper"});var s=P(n,2);lt(s,{}),N(e),j(l,e)}export{pt as component};
